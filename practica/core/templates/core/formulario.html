<!DOCTYPE HTML>
<!--
	Striped by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">

<head>
	<title>Formulario</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	{% load static %}
	<link rel="stylesheet" href="{% static 'core/'%}/css/main.css" />
</head>

<body class="is-preload">
	<script>
		var $ = jQuery;

		function searchName() {
			var nombre = $('#nombre').val();
			$.ajax({
				url: '/api/search/' + nombre,
				type: 'GET',
				success: function (data) {
					var listaPersonas = data;
					var html = '';
					for (var i = 0; i < listaPersonas.length; i++) {
						var persona = listaPersonas[i];
						html += '<li><a href="?nombre=' + persona.nombre + '">' + persona.nombre + '</a></li>';
					}
					$('#listadoPersonas').html(html);
				},
				error: function (xhr, status, error) {
					console.log('Error:', error);
				}
			});
		}

		$(document).ready(function () {
			$('#buscar').click(searchName);
		});
	</script>

	<!-- Content -->
	<div id="content">
		<div class="inner">

			<!-- Post -->
			<article class="box post post-excerpt">
				<header>
					<label for="paciente">Selecciona un paciente:</label>
					<select name="paciente" id="paciente">
					{% for paciente in pacientes %}
					<option value="{{ paciente.idPaciente }}">{{ paciente.nombre }} - {{ paciente.run }}</option>
					{% endfor %}
					</select>
					<button id="form-busqueda" type="submit" class="btn btn-primary">Buscar</button>
						
				</header>
				<div class="info">
					<!--
									Note: The date should be formatted exactly as it's shown below. In particular, the
									"least significant" characters of the month should be encapsulated in a <span>
									element to denote what gets dropped in 1200px mode (eg. the "uary" in "January").
									Oh, and if you don't need a date for a particular page or post you can simply delete
									the entire "date" element.

								-->
					<span class="date"><span class="month">Jul<span>y</span></span> <span class="day">14</span><span
							class="year">, 2014</span></span>
					<!--
									Note: You can change the number of list items in "stats" to whatever you want.
								-->
					<ul class="stats">
						<li><a href="#" class="icon fa-comment">16</a></li>
						<li><a href="#" class="icon fa-heart">32</a></li>
						<li><a href="#" class="icon brands fa-twitter">64</a></li>
						<li><a href="#" class="icon brands fa-facebook-f">128</a></li>
					</ul>
				</div>
				<div class="container">
					<h1>Formulario</h1>
					<form id="form-seleccion">
						<button type="button" class="btn btn-primary" id="btn-buscar">Buscar</button>
						<button type="button" class="btn btn-secondary" id="btn-formulario">Formulario</button>

					</form>




					<div id="form-persona" style="display: none;">
						<h2>Formulario de Persona</h2>
						<form method="post" action="{% url 'procesar_formulario' %}">
							<div id="main">
								<section id="form">
									<h2>Preguntas generales</h2>
									<form method="post" action="procesar_encuesta">
										<div class="fields">
											<div class="field">
												<label for="pregunta1">1. Mayor de 80 años</label>
												<select id="pregunta1" name="pregunta1" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta2">2. Viudez menor de año</label>
												<select id="pregunta2" name="pregunta2" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta3">3. Vivir solo</label>
												<select id="pregunta3" name="pregunta3" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta4">4. Cambio de casa en el último año</label>
												<select id="pregunta4" name="pregunta4" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta5">5. No estar satisfecho con su actual lugar de
													residencia</label>
												<select id="pregunta5" name="pregunta5" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="form-group">
												<label>Mala percepción de su salud, comparado con otras personas de la
													misma edad:</label>
												<select class="form-control" name="percepcion_salud">
													<option value="1">Muy mala salud</option>
													<option value="2">Mala salud</option>
													<option value="3">Normal</option>
													<option value="4">Buena salud</option>
													<option value="5">Muy buena salud</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta7">7. Ingesta diaria de 5 o más fármacos</label>
												<select id="pregunta7" name="pregunta7" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta8">8. Limitación para realizar sus actividades por
													problemas de salud</label>
												<select id="pregunta8" name="pregunta8" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta9">9. Problema (s) de salud que le impida salir de
													la casa</label>
												<select id="pregunta9" name="pregunta9" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
											<div class="field">
												<label for="pregunta10">10. Haber estado hospitalizado en el último
													año</label>
												<select id="pregunta10" name="pregunta10" required>
													<option value="" selected disabled>Seleccione una opción</option>
													<option value="Sí">Sí</option>
													<option value="No">No</option>
												</select>
											</div>
										</div>

										<ul class="actions special">
											<li><input type="button" value="Siguiente"
													onclick="mostrarPreguntasAdicionales()"></li>
										</ul>

										<div id="preguntasAdicionales" style="display: none;">
											<h2>Preguntas adicionales</h2>
											<div class="fields">
												<div class="field">
													<label for="pregunta11">11. Haberse caído frecuentemente en el
														último año</label>
													<select id="pregunta11" name="pregunta11" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta12">12. Tener problemas graves de
														memoria</label>
													<select id="pregunta12" name="pregunta12" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta13">13. Sentirse triste o deprimido casi
														siempre</label>
													<select id="pregunta13" name="pregunta13" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta14">14. No ver bien (a pesar de usar
														lentes)</label>
													<select id="pregunta14" name="pregunta14" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta15">15. No escuchar bien (a pesar de usar
														audífono)</label>
													<select id="pregunta15" name="pregunta15" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta16">16. Usar bastón, andador o silla de ruedas
														habitualmente</label>
													<select id="pregunta16" name="pregunta16" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta17">17. Necesitar ayuda de otras personas para
														comer, levantarse, vestirse o ir al baño</label>
													<select id="pregunta17" name="pregunta17" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta18">18. No poder quedarse solo en su
														casa</label>
													<select id="pregunta18" name="pregunta18" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta19">19. No contar con la ayuda de alguien
														cercano en caso de necesidad (si se enfermara, por
														ejemplo)</label>
													<select id="pregunta19" name="pregunta19" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta20">20. Haber sufrido la muerte o una enfermedad
														grave en un familiar cercano en el último año</label>
													<select id="pregunta20" name="pregunta20" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
											</div>

											<ul class="actions special">
												<li><input type="button" value="Siguiente"
														onclick="mostrarPreguntasRestantes()"></li>
											</ul>
										</div>

										<div id="preguntasRestantes" style="display: none;">
											<h2>Otras preguntas</h2>
											<div class="fields">
												<div class="field">
													<label for="pregunta21">21. No comer al menos una comida caliente al
														día</label>
													<select id="pregunta21" name="pregunta21" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta22">22. Comer menos de tres comidas al
														día</label>
													<select id="pregunta22" name="pregunta22" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta23">23. Necesitar ayuda para contestar la
														encuesta</label>
													<select id="pregunta23" name="pregunta23" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta24">24. Baja de peso de más de tres kilos en 3
														meses</label>
													<select id="pregunta24" name="pregunta24" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
												<div class="field">
													<label for="pregunta25">25. Sin control médico más de 6
														meses</label>
													<select id="pregunta25" name="pregunta25" required>
														<option value="" selected disabled>Seleccione una opción
														</option>
														<option value="Sí">Sí</option>
														<option value="No">No</option>
													</select>
												</div>
											</div>

											<ul class="actions special">
												<li><input type="submit" value="Enviar"></li>
											</ul>
										</div>
									</form>
								</section>
							</div>
					</div>
			</article>

			<!-- Post -->


			<!-- Pagination -->


		</div>
	</div>

	<!-- Sidebar -->
	<div id="sidebar">

		<!-- Logo -->
		<h1 id="logo"><a href="{%url 'home' %}">STRIPED</a></h1>

		<!-- Nav -->
		<nav id="nav">
			<ul>
				<li class="current"><a href="#">Latest Post</a></li>
				<li><a href="{%url 'formulario' %}">Formulario</a></li>
				<li><a href="{%url 'prueba' %}">Pagina de prueba</a></li>
				<li><a href="{%url 'registrar_paciente' %}">Contact Me</a></li>

			</ul>
		</nav>

		<!-- Search -->
		<section class="box search">
			<form method="post" action="#">
				<input type="text" class="text" name="search" placeholder="Search" />
			</form>
		</section>

		<!-- Text -->
		<section class="box text-style1">
			<div class="inner">
				<p>
					<strong>Striped:</strong> A free and fully responsive HTML5 site
					template designed by <a href="http://twitter.com/ajlkn">AJ</a> for <a
						href="http://html5up.net/">HTML5 UP</a>
				</p>
			</div>
		</section>

		<!-- Recent Posts -->
		<section class="box recent-posts">
			<header>
				<h2>Recent Posts</h2>
			</header>
			<ul>
				<li><a href="#">Lorem ipsum dolor</a></li>
				<li><a href="#">Feugiat nisl aliquam</a></li>
				<li><a href="#">Sed dolore magna</a></li>
				<li><a href="#">Malesuada commodo</a></li>
				<li><a href="#">Ipsum metus nullam</a></li>
			</ul>
		</section>

		<!-- Recent Comments -->
		<section class="box recent-comments">
			<header>
				<h2>Recent Comments</h2>
			</header>
			<ul>
				<li>case on <a href="#">Lorem ipsum dolor</a></li>
				<li>molly on <a href="#">Sed dolore magna</a></li>
				<li>case on <a href="#">Sed dolore magna</a></li>
			</ul>
		</section>

		<!-- Calendar -->
		<section class="box calendar">
			<div class="inner">
				<table>
					<caption>July 2014</caption>
					<thead>
						<tr>
							<th scope="col" title="Monday">M</th>
							<th scope="col" title="Tuesday">T</th>
							<th scope="col" title="Wednesday">W</th>
							<th scope="col" title="Thursday">T</th>
							<th scope="col" title="Friday">F</th>
							<th scope="col" title="Saturday">S</th>
							<th scope="col" title="Sunday">S</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="4" class="pad"><span>&nbsp;</span></td>
							<td><span>1</span></td>
							<td><span>2</span></td>
							<td><span>3</span></td>
						</tr>
						<tr>
							<td><span>4</span></td>
							<td><span>5</span></td>
							<td><a href="#">6</a></td>
							<td><span>7</span></td>
							<td><span>8</span></td>
							<td><span>9</span></td>
							<td><a href="#">10</a></td>
						</tr>
						<tr>
							<td><span>11</span></td>
							<td><span>12</span></td>
							<td><span>13</span></td>
							<td class="today"><a href="#">14</a></td>
							<td><span>15</span></td>
							<td><span>16</span></td>
							<td><span>17</span></td>
						</tr>
						<tr>
							<td><span>18</span></td>
							<td><span>19</span></td>
							<td><span>20</span></td>
							<td><span>21</span></td>
							<td><span>22</span></td>
							<td><a href="#">23</a></td>
							<td><span>24</span></td>
						</tr>
						<tr>
							<td><a href="#">25</a></td>
							<td><span>26</span></td>
							<td><span>27</span></td>
							<td><span>28</span></td>
							<td class="pad" colspan="3"><span>&nbsp;</span></td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>

		<!-- Copyright -->
		<ul id="copyright">
			<li>&copy; Untitled.</li>
			<li>Design: <a href="http://127.0.0.1:8000/admin">HTML5 UP</a></li>
		</ul>

	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script>
		function mostrarPreguntasAdicionales() {
			document.getElementById("preguntasAdicionales").style.display = "block";
		}

		function mostrarPreguntasRestantes() {
			document.getElementById("preguntasRestantes").style.display = "block";
		}
	</script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script>
		$(document).ready(function () {
			var nombre;

			// Captura el evento de envío del formulario de búsqueda
			$('#form-busqueda').submit(function (event) {
				event.preventDefault(); // Evita que se envíe el formulario

				// Obtiene el nombre ingresado por el usuario
				nombre = $('#nombre').val();

				// Oculta el formulario de búsqueda
				$('#form-busqueda').hide();

				// Muestra el formulario de persona
				$('#form-persona').show();

				// Puedes usar el nombre para realizar alguna acción en el formulario de persona
				console.log('Nombre seleccionado:', nombre);
			});
		});
	</script>
	<script>

		$(document).ready(function () {
			// Captura el evento de envío del formulario de búsqueda
			$('#form-busqueda').submit(function (event) {
				event.preventDefault(); // Evita que se envíe el formulario

				// Obtiene el nombre ingresado por el usuario
				var nombre = $('#nombre').val();

				// Oculta el formulario de búsqueda
				$('#form-busqueda').hide();

				// Muestra el formulario de persona
				$('#form-persona').show();

				// Puedes usar el nombre para realizar alguna acción en el formulario de persona
				console.log('Nombre seleccionado:', nombre);
			});
		});
	</script>

	<script>
		document.getElementById("btn-buscar").addEventListener("click", function () {
			document.getElementById("form-seleccion").style.display = "none";
			document.getElementById("form-busqueda").style.display = "block";
		});

		document.getElementById("btn-formulario").addEventListener("click", function () {
			document.getElementById("form-seleccion").style.display = "none";
			document.getElementById("form-busqueda").style.display = "none";
		});

		$('li a').click(function (e) {
			e.preventDefault(); // Evita que el enlace recargue la página

			$('#form-seleccion').hide();
			$('#form-busqueda').hide();
			$('#form-persona').show();
		});
	</script>







</body>

</html>